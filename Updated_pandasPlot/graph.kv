#:kivy 1.0.9
#  This is the kivy file which contains the gui information for a
#  demo program written for the midpoint project check in CS467,
#  Capstone, Spring 2018.
#
#  Team:  Scorpius
#  Team members:  John Carrabino, Aaron Peressini, Cheryl Freeman

<GraphSession>:
    BoxLayout:
        id:             blayout
        orientation:    'vertical'
        size:           self.parent.size
        pos:            self.parent.pos
        ScreenManager:
            id: sm

            Screen:
                size:   blayout.size
                pos:    blayout.pos
                name:   'screen0'
                Popup:
                    id:     intro_popup
                    size:   self.parent.size
                    pos:    self.parent.pos
                    title:  'Scorpius Plotter'
                    FloatLayout:
                        orientation:  'vertical'
                        Label:  
#                           With thanks to https://blog.kivy.org/2014/07/wrapping-text-in-kivys-label/
                            size_hint_y:    None
                            size_hint_x:    0.5
                            pos_hint:       {'x': 0, 'y': 0.8}
                            text_size:      self.width, None
                            height:         self.texture_size[1]
                            text:           root.welcome_text
                        Button:
                            id:             next_screen
                            size_hint_y:    0.15
                            size_hint_x:    0.2
                            pos_hint:       {'x': 0.7, 'y': 0.25}
                            on_press:       sm.current = 'screen1'
                            text:           'Next' 

            Screen:
                size:   blayout.size
                pos:    blayout.pos
                name:   'screen1'
                Popup:
                    id:     file_popup
                    size:   self.parent.size
                    pos:    self.parent.pos
                    title:  'Select data file to graph'
                    FloatLayout:
                        Label:
                            size_hint_y:    None
                            size_hint_x:    0.5
                            pos_hint:       {'x': 0.15, 'y': 0.25}
                            text_size:      self.width, None
                            height:         self.texture_size[1]
                            text:           root.path
                        FileChooserIconView:
                            id:             file_chooser
                            path:           root.path
                            on_selection:   root.filename = self.selection[0];
                            #file_popup.dismiss()
                            
                            #root.create_graph(None)
                        Button:
                            id:             next_screen
                            size_hint_y:    0.15
                            size_hint_x:    0.2
                            pos_hint:       {'x': 0.7, 'y': 0.25}
#  Area for future fixing:  on_press should call a python function which checks to see if
#  the root.filename attribute is blank.  "filename" could be an argument sent to that
#  function, so that we can re-use it to check for other kinds of things that the user
#  needs to supply.  Anyway, after checking that the argument "filename" isn't blank, then
#  the sm.current can be set to screen 2.  This could also be sent as an argument, so that
#  sm.current can be set to whatever screen we want.  If the argument "filename" is blank,
#  then some Label which is currently invisible can be filled with red text saying "Please
#  select a file for input before continuing" or something like that.
                            on_press:       sm.current = 'screen2'
                            text:           'Next' 

            Screen:
                size:       blayout.size
                pos:        blayout.pos
                name:       'screen2'
                Popup:
                    id:     x_axis_popup
                    size:   self.parent.size
                    pos:    self.parent.pos
                    title:  'Select the x-axis for your graph'
                    FloatLayout:
    #                    orientation:    'vertical'
                        size:           self.parent.size
                        pos:            self.parent.pos
                        Button:
                            id:             next_screen
                            size_hint_y:    0.15
                            size_hint_x:    0.2
                            pos_hint:       {'x': 0.7, 'y': 0.25}
                            on_press:       sm.current = 'screen3'
                            text:           'Next' 
                        Button:
                            id:             previous_screen
                            size_hint_y:    0.15
                            size_hint_x:    0.2
                            pos_hint:       {'x': 0.2, 'y': 0.25}
                            on_press:       sm.current = 'screen1'
                            text:           'Back' 

            Screen:
                size:       blayout.size
                pos:        blayout.pos
                name:       'screen3'
                Popup:
                    id:     graph_popup
                    size:   self.parent.size
                    pos:    self.parent.pos
                    title:  'Select the type of graph you wish to see'
                FloatLayout:
                    #graph_now: line_graph
#                    orientation:    'vertical'
                    size:           self.parent.size
                    pos:            self.parent.pos

                    Button:
                        id:         line_graph
                        pos_hint:       {'x': 0.2, 'y': 0.25}
                        size_hint:       [0.15, 0.2]
                        on_press:   root.create_graph(self)
                        text:       "Click me to create a line graph"

                    Button:
                        id:         scatter_button
                        pos_hint:       {'x': 0.5, 'y': 0.25}
                        size_hint:       [0.15, 0.2]
                        on_press:   root.create_graph(self)
                        text:       "Click me to create a scatter graph"

                    Button:
                        id:         bar_button
                        pos_hint:       {'x': 0.7, 'y': 0.25}
                        size_hint:       [0.15, 0.2]
                        on_press:   root.create_graph(self)
                        text:       "Click me to create a bar graph"

        



#<line_Button>:
#    size:  300, 150
#    text:  "Click to see a line graph"
#
#<scatter_Button>:
#    size:  300, 150
#    text:  "Click to see a scatter graph"
#
#
#
#
